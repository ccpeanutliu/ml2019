import sys
import csv
import numpy as np
weight = [
0.015837149309539
,-0.030585254596166
,0.010841072172032
,-0.064993061762791
,-0.010405862092048
,0.004944908321398
,0.002296072190807
,-0.02265738992844
,0.080954965147947
,-0.036759017602013
,0.015042049451214
,0.060519691057145
,-0.002235311502535
,0.038445107326165
,0.152974140136309
,0.103027161002647
,0.154376338916454
,0.338047872071045
,0.129910584442356
,0.01764424776678
,0.085154749835393
,-0.380356910955796
,0.488397174130875
,-0.140958000835797
,-0.413627344011413
,0.246066328026233
,1.11418542986493
,-0.362720067210072
,0.042644093594887
,-0.320008482737815
,-0.031665655517733
,0.520240348445883
,-0.446085969519208
,-0.081289378356806
,-0.200234411638342
,0.365620314117944
,0.021611964807198
,0.02060451239444
,0.113690065168182
,-0.048519955922984
,-0.017001543828524
,-0.085540661632869
,0.034151080185132
,0.089851509726756
,-0.169306068486325
,0.024284899879487
,-0.03754905456374
,-0.01873124898508
,-0.069486345068911
,-0.017735462046572
,-0.015575696919358
,-0.040727476854573
,-0.106776642764113
,0.154603932528963
,0.007130757319934
,-0.02881138663811
,0.002903652178066
,0.030045002061253
,0.029938138447717
,0.006016068170732
,-0.016984211682492
,0.0126997369927
,0.127632679553393
,0.001595048251173
,0.014924583526562
,-0.010461100765807
,-0.018442455629816
,0.004458488751004
,-0.031786629011524
,-0.025389252545963
,-0.016327478773337
,0.102082434078864
,0.008084802422854
,0.009265458590997
,-0.031443765890734
,0.041779652525248
,-0.005728981396398
,-0.042602312596585
,0.039828234585277
,0.000774157481424
,0.033560625251402
,-0.033519981466348
,-0.011556480483837
,0.201571655947365
,-0.221557015740041
,-0.027240702835137
,0.478230460457477
,-0.537470313453342
,0.018722213018745
,0.954094244202185
,0.032892217350553
,-0.002679862269851
,-0.054348507231887
,0.00978966366007
,-0.046526782980406
,0.049504490508245
,0.016818171535362
,-0.036789546076123
,-0.08223526438521
,-0.002371234360358
,0.021394852875678
,0.002633779006968
,-0.031626686130152
,-0.024848152435738
,0.019028039824559
,-0.043946475462597
,0.012252346377326
,0.022714970573586
,-0.256528425603523
,0.305230780964785
,-0.060945945185321
,-0.050590388733524
,-0.022119041212964
,0.056546779910933
,-0.136735272704657
,0.145005947384971
,0.163382170522518
,-0.018902505189095
,-0.007767892768998
,0.005557347138838
,-0.068430157657809
,0.069698230005127
,0.134891033385327
,0.089918110444062
,0.08521341070998
,0.290122164113795
,-0.000461886368793
,0.002609875955495
,-0.000675399650935
,0.001736018966279
,0.000287717606885
,0.001490437885945
,-0.002312895527846
,0.001016862016864
,0.000292778210386
,-0.001718498008432
,-0.00063521405619
,0.001046096283001
,-0.002076441640374
,0.00073447391921
,1.53332174554373E-05
,-7.95570489497517E-05
,-0.002501848863604
,0.00051347018099
,-0.151058986013975
,-0.086559227004386
,0.127025547497617
,0.047518669922184
,-0.088873272752192
,-0.055114623886782
,-0.077793951974031
,-0.086908856686769
,-0.053546919682171
,-0.014391278141599
,0.117921743497984
,-0.072673747059999
,-0.11734482255581
,-0.049290379669457
,0.282924525108524
,-0.030145275895867
,-0.172017402920071
,0.108023173224034
,0.078978788652671
]

print(sys.argv[1])
print(sys.argv[2])

weight = np.matrix(weight)
weight = weight.T

tdata = []
ti = 0
for i in range(18):
	tdata.append([])

with open(sys.argv[1], newline='') as csvfile:
	rows = csv.reader(csvfile)
	for row in rows:
		for j in range(2,11):
			tdata[ti%18].append(row[j])
		ti+=1

for i in range(len(tdata)):
    for j in range(len(tdata[0])):
        if tdata[i][j] == 'NR':
            tdata[i][j] = 0.0
        else:
            tdata[i][j] = float(tdata[i][j])

tdata = np.matrix(tdata)

test_x = []


for i in range(240):
	test_x.append([])

xi = 0
count = 0
while(xi < 2160):
    for j in range(18):
        for k in range(xi,xi+9):
            test_x[count].append(tdata[j,k])
    count += 1
    xi += 9

for i in range(len(test_x)):
	test_x[i].append(1)

test_x = np.matrix(test_x)

ty = np.dot(test_x,weight)

ans2 = []
for i in range(240):
    ans2.append([])
for i in range(ty.shape[0]):
    for j in range(ty.shape[1]):
        ans2[i].append(np.abs(ty[i,j]))

sw = []

for i in range(weight.shape[0]):
    sw.append([])

for i in range(weight.shape[0]):
    for j in range(weight.shape[1]):
        sw[i].append(weight[i,j])

# In[24]:


with open(sys.argv[2], 'w', newline='') as csvfile:
  writer = csv.writer(csvfile)
  writer.writerows(ans2)

